<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin | KingsDesign</title>
    <link rel="icon" type="image/png" href="dist/b img/InShot_20250813_151255810.png">
    <link rel="stylesheet" href="output.css">
    <style>
        /* Custom styles for admin panel */
        .image-preview {
            transition: all 0.3s ease;
        }
        .image-preview:hover {
            transform: scale(1.05);
        }
        .cover-image {
            border: 3px solid #1311a3f3;
        }
        .sortable-placeholder {
            border: 2px dashed #ccc;
            background-color: #f9f9f9;
            min-height: 100px;
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #1311a3f3;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="w-full overflow-x-hidden bg-slate-50">
    <!-- Mobile Menu Overlay -->
    <div id="mobileMenu" class="fixed inset-0 bg-[#d4d4d450] bg-opacity-50 z-50 lg:hidden">
        <div class="bg-white h-full w-4/5 max-w-sm p-6 mr-auto mobile-menu-slide">
            <div class="flex justify-between items-center mb-8">
                <p class="text-[#1311a3f3] text-xl font-semibold">KingsDesign</p>
                <button id="closeMenu" class="text-2xl text-slate-700 hover:text-[#1311a3f3]">&times;</button>
            </div>
            <nav class="flex font-medium flex-col space-y-4">
                <a href="index.html" class="text-slate-700 hover:text-[#1311a3f3] py-3 px-2 rounded hover:bg-slate-100 transition-colors">Home</a>
                <a href="index.html#about" class="text-slate-700 hover:text-[#1311a3f3] py-3 px-2 rounded hover:bg-slate-100 transition-colors">About</a>
                <a href="index.html#services" class="text-slate-700 hover:text-[#1311a3f3] py-3 px-2 rounded hover:bg-slate-100 transition-colors">Services</a>
                <a href="portfolio.html" class="text-slate-700 hover:text-[#1311a3f3] py-3 px-2 rounded hover:bg-slate-100 transition-colors">Portfolio</a>
                <a href="index.html#testimonials" class="text-slate-700 hover:text-[#1311a3f3] py-3 px-2 rounded hover:bg-slate-100 transition-colors">Testimonials</a>
                <a href="index.html#footer" class="text-slate-700 hover:text-[#1311a3f3] py-3 px-2 rounded hover:bg-slate-100 transition-colors">Contact</a>
            </nav>
        </div>
    </div>

    <!-- Admin Header Section -->
    <section id="hero" class="pt-4 pb-8 bg-gradient-to-br from-slate-50 to-white">
        <div class="w-full px-4 lg:px-0 lg:mx-auto">
            <header class="flex justify-between items-center pl-4 mb-12">
                <div class="flex -ml-4 items-center">
                    <img src="dist/b img/InShot_20250813_151255810.png" alt="KingsDesign logo" class="h-7 w-auto mr-2">
                    <p class="text-[#1311a3f3] text-xl font-semibold">KingsDesign</p>
                </div>
                
                <!-- Mobile Menu Button -->
                <button id="openMenu" class="lg:hidden text-2xl text-slate-700 p-2 hover:bg-slate-100 rounded">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                    </svg>
                </button>
                
                <!-- Desktop Navigation -->
                <nav class="hidden lg:flex text-sm text-slate-700 min-w-[45vw] font-medium justify-around items-center">
                    <a href="index.html" class="hover:text-[#1311a3f3] transition-colors">Home</a>
                    <a href="index.html#about" class="hover:text-[#1311a3f3] transition-colors">About</a>
                    <a href="index.html#services" class="hover:text-[#1311a3f3] transition-colors">Services</a>
                    <a href="portfolio.html" class="hover:text-[#1311a3f3] transition-colors">Portfolio</a>
                    <a href="index.html#testimonials" class="hover:text-[#1311a3f3] transition-colors">Testimonials</a>
                    <a href="index.html#footer" class="whitespace-nowrap rounded-md text-white p-2 bg-[#1311a3f3] hover:bg-[#0f0d8a] transition-colors">Let's Talk</a>
                </nav>
            </header>

            <!-- Admin Hero Content -->
            <div class="text-center lg:w-4/5 max-w-4xl mx-auto">
                <p class="font-medium text-[#1311a3f3] text-sm mb-4">ADMIN PANEL</p>
                <h1 class="text-4xl sm:text-5xl lg:text-6xl font-semibold text-slate-800 mb-6">
                    Upload <span class="text-[#1311a3f3]">Designs</span>
                </h1>
                <p class="font-medium text-slate-700 text-lg lg:text-xl leading-relaxed">
                    Add new projects to your portfolio with ease. Upload images, set categories, and manage your design collection.
                </p>
            </div>
        </div>
    </section>

    <!-- Login View -->
    <section id="loginView" class="w-full px-4 mb-16">
        <div class="w-full lg:w-2/5 lg:mx-auto bg-white rounded-xl shadow-lg p-8">
            <h2 class="text-2xl font-semibold text-slate-800 mb-6 text-center">Admin Login</h2>
            
            <div class="space-y-4">
                <div>
                    <label for="email" class="block text-sm font-medium text-slate-700 mb-1">Email</label>
                    <input type="email" id="email" placeholder="Enter your email" class="w-full px-4 py-3 border-2 border-slate-300 rounded-lg focus:border-[#1311a3f3] focus:outline-none transition-colors">
                </div>
                
                <div>
                    <label for="password" class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" class="w-full px-4 py-3 border-2 border-slate-300 rounded-lg focus:border-[#1311a3f3] focus:outline-none transition-colors">
                </div>
                
                <button id="loginBtn" class="w-full border-2 border-[#1311a3f3] text-[#1311a3f3] py-3 rounded-lg font-medium hover:bg-[#1311a3f3] hover:text-white transition-all duration-300 mt-4">
                    Log In
                </button>
            </div>
        </div>
    </section>

    <!-- App View (Hidden by default) -->
    <section id="appView" class="w-full px-4 mb-16 hidden">
        <div class="w-full lg:w-4/5 lg:mx-auto">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl font-semibold text-slate-800">Upload New Design</h2>
                <button id="logoutBtn" class="border-2 border-slate-700 px-4 py-2 whitespace-nowrap bg-transparent rounded-lg font-medium text-slate-700 hover:bg-slate-700 hover:text-white transition-colors">
                    Log Out
                </button>
            </div>
            
            <!-- Upload Form -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                <form id="uploadForm">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="projectTitle" class="block text-sm font-medium text-slate-700 mb-1">Project Title</label>
                            <input type="text" id="projectTitle" required class="w-full px-4 py-3 border-2 border-slate-300 rounded-lg focus:border-[#1311a3f3] focus:outline-none transition-colors">
                        </div>
                        
                        <div>
                            <label for="category" class="block text-sm font-medium text-slate-700 mb-1">Category</label>
                            <select id="category" required class="w-full px-4 py-3 border-2 border-slate-300 rounded-lg focus:border-[#1311a3f3] focus:outline-none transition-colors">
                                <option value="">Select a category</option>
                                <option value="branding">Branding</option>
                                <option value="social-media">Social Media</option>
                                <option value="ui-ux">UI/UX Design</option>
                                <option value="print">Print Design</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-slate-700 mb-1">Project Type</label>
                        <div class="flex space-x-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="projectType" value="single" checked class="text-[#1311a3f3] focus:ring-[#1311a3f3]">
                                <span class="ml-2">Single</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="projectType" value="batch" class="text-[#1311a3f3] focus:ring-[#1311a3f3]">
                                <span class="ml-2">Batch</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <label for="description" class="block text-sm font-medium text-slate-700 mb-1">Description</label>
                        <textarea id="description" rows="4" required class="w-full px-4 py-3 border-2 border-slate-300 rounded-lg focus:border-[#1311a3f3] focus:outline-none transition-colors"></textarea>
                    </div>
                    
                    <div class="mb-6">
                        <label for="imageUpload" class="block text-sm font-medium text-slate-700 mb-1">Upload Images</label>
                        <input type="file" id="imageUpload" accept="image/*" multiple class="w-full px-4 py-3 border-2 border-slate-300 rounded-lg focus:border-[#1311a3f3] focus:outline-none transition-colors">
                        <p class="text-sm text-slate-500 mt-1">Select multiple images for your project. The first image will be used as the cover image by default.</p>
                    </div>
                    
                    <!-- Image Preview Gallery -->
                    <div id="imagePreviewContainer" class="mb-6 hidden">
                        <h3 class="text-lg font-medium text-slate-800 mb-3">Image Preview</h3>
                        <div id="imagePreview" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"></div>
                    </div>
                    
                    <!-- Upload Status -->
                    <div id="uploadStatus" class="mb-6 hidden">
                        <div class="flex items-center justify-center py-4">
                            <div class="loading-spinner mr-3"></div>
                            <span id="uploadStatusText">Uploading images...</span>
                        </div>
                    </div>
                    
                    <!-- Submit Button -->
                    <button type="submit" id="submitBtn" class="w-full border-2 border-[#1311a3f3] text-[#1311a3f3] py-3 rounded-lg font-medium hover:bg-[#1311a3f3] hover:text-white transition-all duration-300">
                        Upload Project
                    </button>
                </form>
            </div>
            
            <!-- Success Message -->
            <div id="successMessage" class="hidden bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg mb-6">
                <p>Project uploaded successfully!</p>
            </div>
            
            <!-- Error Message -->
            <div id="errorMessage" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-6">
                <p id="errorMessageText">There was an error uploading your project. Please try again.</p>
            </div>
        </div>
    </section>

    <!-- Back to Top Button -->
    <button id="backToTop" class="fixed bottom-6 right-6 bg-[#1311a3f3] text-white p-3 rounded-full shadow-lg hover:bg-[#0f0d8a] transition-colors opacity-0 pointer-events-none z-40">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" />
        </svg>
    </button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        // Firebase configuration from existing admin page
        const firebaseConfig = {
            apiKey: "AIzaSyBpmhtLdaoteX-7aV0m_1kMvuMTWuex-E4",
            authDomain: "kingsdesignn.firebaseapp.com",
            projectId: "kingsdesignn",
            storageBucket: "kingsdesignn.firebasestorage.app",
            messagingSenderId: "767602534908",
            appId: "1:767602534908:web:41cd5615909a3d0e5a2a79",
            measurementId: "G-EBD0V8S97L"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const loginView = document.getElementById('loginView');
        const appView = document.getElementById('appView');
        const emailEl = document.getElementById('email');
        const passEl = document.getElementById('password');

        document.getElementById('loginBtn').addEventListener('click', async () => {
            try { 
                await signInWithEmailAndPassword(auth, emailEl.value, passEl.value); 
            }
            catch (e) { 
                alert(e.message); 
            }
        });

        document.getElementById('logoutBtn').addEventListener('click', () => signOut(auth));

        onAuthStateChanged(auth, (user) => {
            if (user) { 
                loginView.style.display = 'none'; 
                appView.style.display = 'block'; 
            }
            else { 
                loginView.style.display = 'block'; 
                appView.style.display = 'none'; 
            }
        });

        // Mobile menu functionality
        const mobileMenu = document.getElementById('mobileMenu');
        const openMenuBtn = document.getElementById('openMenu');
        const closeMenuBtn = document.getElementById('closeMenu');
        const backToTopBtn = document.getElementById('backToTop');

        if (openMenuBtn && closeMenuBtn && mobileMenu) {
            openMenuBtn.addEventListener('click', function(e) {
                e.preventDefault();
                mobileMenu.classList.add('show');
                const slideElement = mobileMenu.querySelector('.mobile-menu-slide');
                if (slideElement) {
                    setTimeout(() => {
                        slideElement.classList.add('show');
                    }, 10);
                }
                document.body.style.overflow = 'hidden';
            });

            closeMenuBtn.addEventListener('click', function(e) {
                e.preventDefault();
                mobileMenu.classList.add('closing');
                const slideElement = mobileMenu.querySelector('.mobile-menu-slide');
                if (slideElement) {
                    slideElement.classList.remove('show');
                }
                setTimeout(() => {
                    mobileMenu.classList.remove('show', 'closing');
                    document.body.style.overflow = 'auto';
                }, 400);
            });

            mobileMenu.addEventListener('click', function(e) {
                if (e.target === mobileMenu) {
                    mobileMenu.classList.add('closing');
                    const slideElement = mobileMenu.querySelector('.mobile-menu-slide');
                    if (slideElement) {
                        slideElement.classList.remove('show');
                    }
                    setTimeout(() => {
                        mobileMenu.classList.remove('show', 'closing');
                        document.body.style.overflow = 'auto';
                    }, 400);
                }
            });

            const mobileNavLinks = mobileMenu.querySelectorAll('nav a');
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', function() {
                    mobileMenu.classList.add('closing');
                    const slideElement = mobileMenu.querySelector('.mobile-menu-slide');
                    if (slideElement) {
                        slideElement.classList.remove('show');
                    }
                    setTimeout(() => {
                        mobileMenu.classList.remove('show', 'closing');
                        document.body.style.overflow = 'auto';
                    }, 400);
                });
            });
        }

        // Back to top functionality
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                backToTopBtn.classList.remove('opacity-0', 'pointer-events-none');
            } else {
                backToTopBtn.classList.add('opacity-0', 'pointer-events-none');
            }
        });

        backToTopBtn.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    </script>
    
    <!-- Admin functionality will be loaded from admin.js -->
    <script src="admin.js" type="module"></script>
</body>
</html>